refacto all class to functions